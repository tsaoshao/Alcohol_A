---
title: "report"
format: html
editor: visual
---

# Alcohol Data Tidying Report

## Introduction

... This is a student project of data tidying in R studio.

```{r}
library(tidyverse)

comment <- read_csv("Comment.csv")
day_data <- read_csv("DayData.csv")
like <- read_csv("Like.csv")
login <- read_csv("Login.csv")
post <- read_csv("Post.csv")
pre_survey <- read_csv("Presurvey.csv")
user <- read_csv("User.csv")
week_data <- read_csv("WeekData.csv")
```

## Principle 1

### Presurvey.csv

This file...

### Post.csv

Principle 1 was applied to split post attributes and viewer attributes into two different tibbles. Variable names were transformed into lowercases with underscores to pave way for further analysis.

```{r}
# splitting post and view information
post_tbl <- post |> 
  select(
    post_id = PostID,
    Fakepost : Facebookpost,
    post_title = PostTitle,
    post_header = PostHeader,
    post_text1 = PostText1,
    post_text2 = PostText2,
    post_time = PostTime,
    post_creator = PostCreator,
    post_comments = PostComments,
    post_likes = PostLikes,
    post_views = PostViews
  ) |> 
  distinct(post_id, .keep_all = TRUE) |> 
  # numeric counts
  mutate(
    post_comments = as.integer(post_comments),
    post_likes = as.integer(post_likes),
    post_views = as.integer(post_views),
    # parse datetime if post_time exists (try multiple formats)
    post_time = parse_date_time(post_time, orders = c("Ymd HMS", "Y-m-d H:M:S", "d/m/Y H:M:S", "Y-m-d", "ymd HMS"))
  )

view_tbl <- post |> 
  select(post_id = PostID, 
         viewer_id = ViewerID, 
         SyncTime,
  ) |> 
  filter(!is.na(viewer_id)) |> 
  mutate(
    viewer_id = as.character(viewer_id),
    SyncTime = parse_date_time(SyncTime, orders = c("Ymd HMS", "Y-m-d H:M:S", "d/m/Y H:M:S"))
  ) |> 
  distinct(post_id, viewer_id, .keep_all = TRUE)

# checking primary key
post_tbl |> 
  count(post_id) |> 
  filter(n > 1)

view_tbl |> 
  count(post_id, viewer_id) |> 
  filter(n > 1)
```

## Principle 2

### Presurvey.csv

### Post.csv

## Principle 3

### Presurvey.csv

### Post.csv

## Principle 4

### Presurvey.csv

### Post.csv

## Description
